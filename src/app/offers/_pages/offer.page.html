<ion-header>

	<easyah-header></easyah-header>
</ion-header>

<ion-content>
	<ion-grid>

		<ion-row>
			<div class="offerPageButtonHeader">
				<ion-item lines="none">
					<ion-button (click)="onGoBackBtnTap($event)">Go Back</ion-button>
					<ion-button slot="end" *ngIf="isCurrentUsersOffer()" (click)="onEditOfferBtnClick($event)">
						Edit
					</ion-button>
				</ion-item>
			</div>
		</ion-row>


		<ion-row>
			<div class="centered card">
				<img height="275px" [src]="getThumbnailImage()"/>
			</div>
		</ion-row>	

		<ion-row>
			<h1 id="displayOfferTitle">{{ getModel()["title"] }}</h1>
		</ion-row>

		<ion-row>
			<div class="divdisplayOfferQuantity">
				Offering <span id="displayOfferQuantity">{{ getModel()["quantity"] }} {{ getModel()["quantityDescription"] }}</span>
			</div>
		</ion-row>
		<ion-row>
			<h4 id="displayOfferDescription">{{ getModel()["description"] }}</h4>
		</ion-row>

		<ion-row>
			<ion-item lines="none">
				<span class="displayOfferSectionHeader">Keywords</span>
			</ion-item>
		</ion-row>			
		<ion-row>
			<ion-item>
				<span *ngFor="let item of getModel()['keywords']">
					<span class="blockItem" >{{item.text}}</span>
				</span>
			</ion-item>
		</ion-row>
		
		<ion-row>
			<ion-item lines="none">
				<span class="displayOfferSectionHeader">Requirements</span>
			</ion-item>
		</ion-row>			
		<ion-row>
			<ion-item>
				<span class="pointsSpan">{{ getRequiredPointsQuantityString() }}</span>
				<users-line-item *ngFor="let user of getRequiredRecommendationUserObjects()" item="user" clickthru="false"></users-line-item>
			</ion-item>
		</ion-row>

		<ion-row>
			<ion-item lines="none">
				<!-- TODO: This should be a 'more' link that disappears when clicked, revealing the details, and then 
					reappers when the details are clicked, showing the 'more' link again. -->
				<span class="displayOfferSectionHeader">Statistics</span>
			</ion-item>
		</ion-row>			
		<ion-row>
			<ion-item>
				<span *ngIf="hasStatistics()">
					<span>{{getFirstFulfilledText()}}<br/></span>
					<span>{{getTotalPointsEarned()}}<br/></span>
					<span>{{getNumberOfComplaints()}}<br/></span>
				</span>
				<span *ngIf="!hasStatistics()">
					<span>This offer is new! It doesn't have statistics yet.<br/></span>
				</span>
			</ion-item>		
		</ion-row>

		<ion-row *ngIf="isRequestMessageAvailable()">
			<ion-item lines="none">
				<div>
					<span class="displayOfferSectionHeader">Messages</span>
				</div>
			</ion-item>
			<br/>
			<ion-item lines="none">
				<span *ngFor="let item of getStillMoreTimeLeftMessages()" class="redColorMsg" >
					{{item.msg}}<br/>
				</span>
			</ion-item>
			<ion-item lines="none">
				<span *ngFor="let item of getAlreadyRequestedRequestMessages()" class="redColorMsg" >
					{{item.msg}}<br/>
				</span>
			</ion-item>
			<ion-item lines="none">
				<span *ngFor="let item of getPointsRequestMessages()" class="redColorMsg" >
					You need {{item.msg}}.<br/>
				</span>
			</ion-item>
			<ion-item lines="none">
				<span *ngIf="isRecommendationsRequestMessageAvailable()">
					You need recommendations from:
						<ul>
							<li *ngFor="let item of getRecommendationsRequestMessages()" class="redColorMsg" >
								{{item.msg}}<br/>
							</li>
						</ul>
				</span>
			</ion-item>
		</ion-row>
		
		<p></p>
		
		<ion-row>
			<ion-button [hidden]="!isDeleteBtnVisible()" color="danger" (click)="onDeleteBtnTap($event)">Delete</ion-button>			
			<ion-button [hidden]="!isRequestBtnVisible()" (click)="onRequestBtnTap($event)">Request</ion-button>
		</ion-row>

		<p></p>

	</ion-grid>
</ion-content>